<!-- 安全知识页面 -->
<view class="safety-knowledge-page">
    <!-- 顶部导航 -->
    <view class="header">
        <view class="back-btn" bindtap="goBack">
            <text>← 返回</text>
        </view>
        <view class="title">安全知识</view>
    </view>

    <!-- 页面内容 -->
    <scroll-view class="content" scroll-y="true">
        <!-- 安全知识库介绍 -->
        <view class="intro-section">
            <view class="intro-card">
                <view class="intro-header">
                    <text class="intro-icon">📚</text>
                    <text class="intro-title">安全生产知识库</text>
                </view>
                <text class="intro-desc">欢迎访问320国道余杭华坞至富阳高桥段工程项目安全知识库，这里有丰富的安全学习资料供您学习。</text>
            </view>
        </view>

        <!-- 安全知识分类 -->
        <view class="categories-section">
            <view class="section-title">安全知识分类</view>
            <view class="categories-grid">
                <block wx:for="{{categories}}" wx:key="id">
                    <view class="category-item" bindtap="showCategory" data-id="{{item.id}}" data-name="{{item.name}}">
                        <view class="category-icon">{{item.icon || '📚'}}</view>
                        <text class="category-name">{{item.name}}</text>
                    </view>
                </block>
            </view>
        </view>

        <!-- 知识内容显示区域 -->
        <view class="knowledge-content-section {{showContent ? 'show' : ''}}" wx:if="{{selectedCategoryId}}">
            <view class="content-header">
                <text class="content-title">{{selectedCategoryName}}</text>
                <view class="close-btn" bindtap="closeCategory">
                    <text>✕</text>
                </view>
            </view>

            <view class="content-list">
                <view class="knowledge-item" wx:for="{{knowledgeList}}" wx:key="id">
                    <view class="item-header">
                        <text class="item-title">{{item.title}}</text>
                        <text class="item-time">{{item.uploadTime}}</text>
                    </view>
                    <view class="item-content">
                        <text class="content-text">{{item.content}}</text>
                    </view>
                    <view class="item-footer">
                        <text class="item-author">上传人：{{item.uploadedBy}}</text>
                    </view>
                </view>

                <view class="empty-content" wx:if="{{knowledgeList.length === 0}}">
                    <text class="empty-text">该分类暂无安全知识内容。</text>
                </view>
            </view>
        </view>

        <!-- 安全须知模块已移除，内容改由后端维护的安全知识提供 -->
    </scroll-view>
</view>