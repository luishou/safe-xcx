<!--pages/verification-admin/verification-admin.wxml-->
<view class="admin-container">
  <!-- 标签页切换 -->
  <view class="tabs">
    <view
      wx:for="{{tabs}}"
      wx:key="key"
      class="tab-item {{selectedTab === item.key ? 'active' : ''}}"
      data-tab="{{item.key}}"
      bindtap="switchTab"
    >
      {{item.label}}
      <text wx:if="{{selectedTab === item.key}}" class="tab-indicator"></text>
    </view>
  </view>

  <!-- 认证列表 -->
  <view class="verification-list">
    <view wx:if="{{isLoading}}" class="loading">
      <text class="loading-text">加载中...</text>
    </view>

    <view wx:elif="{{verifications.length === 0}}" class="empty">
      <text class="empty-text">暂无{{currentTabLabel}}记录</text>
    </view>

    <view wx:else>
      <view
        wx:for="{{verifications}}"
        wx:key="id"
        class="verification-item"
        data-item="{{item}}"
        bindtap="viewDetail"
      >
        <!-- 头部信息 -->
        <view class="item-header">
          <view class="item-name">{{item.name}}</view>
          <view class="item-status status-{{item.status}}">
            {{getStatusText(item.status)}}
          </view>
        </view>

        <!-- 详细信息 -->
        <view class="item-info">
          <view class="info-row">
            <text class="info-label">身份证号：</text>
            <text class="info-value">{{item.idCard}}</text>
          </view>
          <view class="info-row">
            <text class="info-label">手机号：</text>
            <text class="info-value">{{item.phone}}</text>
          </view>
          <view class="info-row">
            <text class="info-label">所属标段：</text>
            <text class="info-value">{{item.sectionName || '未选择'}}</text>
          </view>
          <view class="info-row">
            <text class="info-label">申请时间：</text>
            <text class="info-value">{{item.createdAt}}</text>
          </view>
          <view wx:if="{{item.reviewComment}}" class="info-row">
            <text class="info-label">审核意见：</text>
            <text class="info-value comment">{{item.reviewComment}}</text>
          </view>
        </view>

        <!-- 操作按钮 -->
        <view wx:if="{{item.status === 'pending'}}" class="item-actions">
          <button
            class="action-btn approve"
            data-id="{{item.id}}"
            catchtap="approveVerification"
          >
            通过
          </button>
          <button
            class="action-btn reject"
            data-id="{{item.id}}"
            catchtap="rejectVerification"
          >
            拒绝
          </button>
        </view>
      </view>
    </view>
  </view>
</view>

